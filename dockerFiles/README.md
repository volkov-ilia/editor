#Docker Files

## Назначение

Директория предназначена для хранения различных настроек окружения

- `prod.yml` - для запуска на проде
- `allApps.yml` - запускает все имеющиеся приложения
- `mongoInit.yml` - для работы с базой данных, формирование/заполнение
- ...

## Работа с докером

Работа с конкретным docker файлом осуществляется по следующей схеме:

- Сборка проекта: `sudo docker compose -f <filename.yml> build && docker image prune -f`
- Запуск: `sudo docker compose -f <filename.yml> up`
- Выключение: `docker compose -f <filename.yml> down`

Периодически необходимо проводить чистку ненужных файлов.

- Отчет докера об использовании дискового пространства: `docker system df`
- Чистка не тегированных образов: `sudo docker image prune -f` (выполняется автоматически по команде с предыдущего пункта)
- Чистка томов (Volumes): `sudo docker volume prune -f`
- Чистка данных монги с машины: `docker volume rm $(docker volume ls -q)`

Можно использовать полную команду для сборки и чистки всего ненужного:

`sudo docker compose -f <filename.yml> build && docker image prune -f && docker volume prune -f`

## Переменные окружения

Если при запуске окружения проект не запускается или в консоли говорится о присвоении пустой строки
переменным окружения, скорее всего не хватает .env файла.
Он должен располагаться в папке с compose файлами.\
Спросить файл переменных у коллег.
